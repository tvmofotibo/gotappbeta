<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>GotApp com Clerk Auth</title>

<style>
    body {
        font-family: Arial, sans-serif;
        background: #000;
        color: #fff;
        display: flex;
        justify-content: center;
        align-items: flex-start;
        padding-top: 40px;
    }
    #app {
        width: 100%;
        max-width: 400px;
        text-align: center;
    }
    button {
        padding: 10px 20px;
        background: #8A2BE2;
        border: none;
        border-radius: 8px;
        color: #fff;
        cursor: pointer;
        margin-top: 20px;
    }
</style>

<!-- Clerk JS (SDK) -->
<script
    async
    crossorigin="anonymous"
    data-clerk-publishable-key="pk_test_dG9sZXJhbnQtb3NwcmV5LTE1LmNsZXJrLmFjY291bnRzLmRldiQ"
    src="https://clerk.clerkjs.com/npm/@clerk/clerk-js@5/dist/clerk.browser.js"
></script>

</head>
<body>

<div id="app"></div>

<script>
window.addEventListener("load", async function () {

  // Carrega o Clerk JS
  await Clerk.load();

  const app = document.getElementById("app");

  if (Clerk.isSignedIn) {
    // Usu√°rio j√° autenticado
    const user = Clerk.session.user;
    app.innerHTML = `
      <h2>Bem-vindo, ${user.firstName || user.primaryEmailAddress.emailAddress} üëã</h2>
      <button id="logoutBtn">Sair</button>
    `;

    document.getElementById("logoutBtn").onclick = async () => {
      await Clerk.signOut();
      location.reload();
    };

    // Token de sess√£o para backend se precisar
    const token = await Clerk.session.getToken();
    console.log("Session token:", token);

  } else {
    // Usu√°rio n√£o est√° logado ‚Üí mostra UI de login/clerk
    app.innerHTML = `<div id="sign-in-container"></div>`;

    Clerk.mountSignIn(document.getElementById("sign-in-container"));
  }

});
</script>

</body>
</html>

